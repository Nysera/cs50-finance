{% extends "layout.html" %}

{% block title %} Quote {% endblock %}

{% block main %}
    <main>
        <section class="quote">
            <div class="container">
                <div class="form">
                    <div class="form_intro">
                        <h1>Current Market Prices</h1>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam nec viverra arcu.</p>
                    </div>
                    <div class="flash-container">
                        {% with messages = get_flashed_messages(with_categories=true) %}
                            {% if messages %}
                                {% for category, message in messages %}
                                    <div class="flash_wrapper {{ category }}">
                                        {{ message }}
                                        <button class="flash_close">
                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M13.957 3.457l-1.414-1.414-4.543 4.543-4.543-4.543-1.414 1.414 4.543 4.543-4.543 4.543 1.414 1.414 4.543-4.543 4.543 4.543 1.414-1.414-4.543-4.543z"></path></svg>
                                        </button>
                                    </div>
                                {% endfor %}
                            {% endif %}
                        {% endwith %}
                    </div>
                    <div class="form_container">
                        <form action="/quote" method="POST">
                            <div class="form_group">
                                <label for="" class="group_label">Stocks Symbol</label>
                                <input name="stock-symbol" type="text" class="group_input" {% if stock_symbol %} value="{{ stock_symbol }}" {% endif %}>
                            </div>
                            <div class="form_submit">
                                <button type="submit" class="button button-primary">Get quote</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        {% if name and price and symbol %}
            <section class="results">
                <div class="container">
                    <div class="results-wrapper">
                        <p>{{ symbol }}</p>
                        <h2>{{ name }}</h2>
                        <p>
                            Current market price
                            <span>
                                ${{ price }}
                            </span>
                        </p>
                    </div>
                </div>
            </section>
        {% endif %}
    </main>
{% endblock %}